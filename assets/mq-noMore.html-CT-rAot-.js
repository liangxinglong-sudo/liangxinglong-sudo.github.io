import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,d as n,o as r}from"./app-CAOD8xuQ.js";const i={};function c(a,e){return r(),t("div",null,e[0]||(e[0]=[n('<h3 id="重复消息是如何出现的" tabindex="-1"><a class="header-anchor" href="#重复消息是如何出现的"><span>重复消息是如何出现的？</span></a></h3><ol><li>生产者将消息放入<code>Broker</code>等待<code>Broker</code>的响应时，由于网络原因生产者没有收到，然后生产者又重发了一次，此时消息就重复了。</li><li>假设消费者拿到消息消费，业务逻辑走完了，事物提交了，此时要更新<code>Consumer offest </code>，然后消费者挂了，另一个消费者顶上，此时<code>Consumer offest</code>没有更新，于是又拿一遍刚才的消息，业务又执行一遍。</li></ol><h3 id="如何解决重复消费消息-幂等" tabindex="-1"><a class="header-anchor" href="#如何解决重复消费消息-幂等"><span>如何解决重复消费消息？幂等</span></a></h3><ol><li>通过version即版本号控制，对比消息中的版本号和数据库中的版本号</li><li>记录关键的key。如订单ID等。</li></ol><div class="hint-container tip"><p class="hint-container-title">什么是幂等？</p><p>理解为同样的参数多次调用同一个接口和调用一次产生的结果是一致的。</p></div>',5)]))}const p=o(i,[["render",c]]),m=JSON.parse('{"path":"/component/mq/mq-noMore.html","title":"如何处理重复消息","lang":"zh-CN","frontmatter":{"title":"如何处理重复消息","icon":"comment-medical","category":["开发工具"],"tag":["tools"],"description":"重复消息是如何出现的？ 生产者将消息放入Broker等待Broker的响应时，由于网络原因生产者没有收到，然后生产者又重发了一次，此时消息就重复了。 假设消费者拿到消息消费，业务逻辑走完了，事物提交了，此时要更新Consumer offest ，然后消费者挂了，另一个消费者顶上，此时Consumer offest没有更新，于是又拿一遍刚才的消息，业务又...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/component/mq/mq-noMore.html"}],["meta",{"property":"og:site_name","content":"CODER LIANG"}],["meta",{"property":"og:title","content":"如何处理重复消息"}],["meta",{"property":"og:description","content":"重复消息是如何出现的？ 生产者将消息放入Broker等待Broker的响应时，由于网络原因生产者没有收到，然后生产者又重发了一次，此时消息就重复了。 假设消费者拿到消息消费，业务逻辑走完了，事物提交了，此时要更新Consumer offest ，然后消费者挂了，另一个消费者顶上，此时Consumer offest没有更新，于是又拿一遍刚才的消息，业务又..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"tools"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"如何处理重复消息\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Coder Liang\\",\\"url\\":\\"https://blog.csdn.net/Phone_1070333541?type=blog\\"}]}"]]},"git":{},"readingTime":{"minutes":0.8,"words":239},"filePathRelative":"component/mq/mq-noMore.md","excerpt":"<h3>重复消息是如何出现的？</h3>\\n<ol>\\n<li>生产者将消息放入<code>Broker</code>等待<code>Broker</code>的响应时，由于网络原因生产者没有收到，然后生产者又重发了一次，此时消息就重复了。</li>\\n<li>假设消费者拿到消息消费，业务逻辑走完了，事物提交了，此时要更新<code>Consumer offest </code>，然后消费者挂了，另一个消费者顶上，此时<code>Consumer offest</code>没有更新，于是又拿一遍刚才的消息，业务又执行一遍。</li>\\n</ol>\\n<h3>如何解决重复消费消息？幂等</h3>\\n<ol>\\n<li>通过version即版本号控制，对比消息中的版本号和数据库中的版本号</li>\\n<li>记录关键的key。如订单ID等。</li>\\n</ol>","autoDesc":true}');export{p as comp,m as data};
